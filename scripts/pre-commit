#!/usr/bin/env bash
set -e

echo "ğŸ” Running pre-commit checks..."

# Check if we're in the correct directory
if [ ! -f "lakefile.lean" ]; then
    echo "âŒ Not in a Lean project directory (lakefile.lean not found)"
    exit 1
fi

# Build the project
echo "ğŸ”¨ Building project..."
if ! lake build; then
    echo "âŒ Build failed!"
    exit 1
fi
echo "âœ… Build successful!"

# Run tests
echo "ğŸ§ª Running tests..."
if ! lake test; then
    echo "âŒ Tests failed!"
    exit 1
fi
echo "âœ… Tests passed!"

echo "ğŸ‰ All pre-commit checks passed!"